.viewport {
	height: 100%;
	overflow-x: hidden;
	overflow-y: scroll;
	position: relative;
	-webkit-overflow-scrolling: touch;

	transform-style: preserve-3d;
	perspective: 1px;
}

.scene {
	height: calc(min(70vw, 80vh));
	// height: 80vh;

	&:not(.solid) {
		box-shadow: inset 0 0 200px rgba(100,100,100,0.5);
		// max-height: 60vw;
	}
}

.parallax img {
	object-position: 50% 50%;
	box-sizing: border-box;
	// max-height: 80vw;
	height: calc(min(95vw, 85vh));
	margin-bottom: calc(max(-95vw, -85vh));
	// height: 90vh;
	// margin-bottom: -90vh;
	object-fit: cover;
  	// Since the parallax elements still consume space, we set the margin to undo
    // the height of this parallax element making it essentially consume 0 space.

    top: 0px;
    min-width: 100%;
    width: 100%;
}

.lazy-image {
	min-width: 100%;
	min-height: 100%;
}

.lazy-image img {
    position: absolute;

    -webkit-transition: opacity 1s ease-in-out;
       -moz-transition: opacity 1s ease-out;
        -ms-transition: opacity 1s ease-out;
				transition: opacity 1s ease-out;
    

    object-fit: cover;

    opacity: 0;
	&.loaded {
	    opacity: 1;
	}
}

.img-small {
	filter: blur(20px);
     // this is needed so Safari keeps sharp edges 
    transform: scale(1);
}

.golden-gate img {
	object-position: 80% 55%;
}

.purple-long-photo img {
	object-position: 30% 50%;
}

.top-25 img {
	object-position: 50% 25%;
}

.top-75 img {
	object-position: 50% 75%;
}

.header {
	// the image
	&.parallax img {
		height: calc(min(70vw, 100vh));
		margin-bottom: calc(max(-70vw, -100vh));
		// height: 70vh;
		// margin-bottom: -70vh;
	}

	// the transparent space
	&.scene {
		height: calc(min(70vw, 90vh));
		// height: 70vh;
	}

	// @include media-query($on-palm) {
	// 	&.parallax img {
	// 		width: 100vw;
	// 		margin-bottom: -100vh;
	// 	}

	// 	// the transparent space
	// 	&.scene {
	// 		height: 50vh;
	// 	}
	// }
}


.page-header {
	$ph-height: 60vh;

	// the image
	&.parallax img {
		height: $ph-height;
		margin-bottom: -1 * $ph-height;
	}

	// the transparent space
	&.scene {
		height: $ph-height - 10vh;
	}
}

.solid {
	z-index: 1;
	position: relative;
	height: auto;
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: flex-start;

	min-height: 40vh;

	background-color: $background-color;
}